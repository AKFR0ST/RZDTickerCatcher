# RZDTickerCatcher

Сервер перехватчиков выпадающих в продажу железнодорожных билетов. Интерфейс реализован в виде подключения к telegram боту. Работает по принципу периодического запроса API rzd.ru и обработки ответа.

## Конфигурирование

app.urlApi=https://pass.rzd.ru/timetable/public/ru - API интерфейс РЖД.

app.layer_id=5827 - слой 5827 отвечает за интерфейс получения свободных мест.

app.timeout - таймайт между запросами к API в момент поиска билетов.

app.botId - ID бота для управления сервером.

app.apiKey - ApiKey бота

## Управление

Бот принимает следующие команды:

/new - создать кэтчер
/all - вывести список всех кэтчеров
/active - вывести список работающих кэтчеров
/kill - остановка кэтчера

### /new
При запросе запустит меню создания нового кэтчера:
1. Ввод станции отправления. Введите первые символы названия станции отправления(не менее трех).
2. Из предложенного пронумерованного списка выберете нужную станцию или введите код АСУ экспресс нужной станции.
3. Ввод станции назначения. Введите первые символы названия станции назначения(не менее трех).
4. Из предложенного пронумерованного списка выберете нужную станцию или введите код АСУ экспресс нужной станции.
5. Ввод даты отправления поезда в формате "dd.mm.yyyy".
6. Выбор поезда. Из предложенно списка поездов, выберете подходящий или введите номер вручную.
7. Выберете категорию билета.
8. Введите максимальную стоимость билета.

### /all
При запросе вызовет метод сервера, выводящий список всех кэтчеров, вне зависимости от статуса

### /active
При запросе выведет список кэтчеров, еще не завершивших работу

### /kill
При запросе выведет пронумерованный список активных кэтчеров и предложит выбрать кэтчер для остановки. Испорльзуйте выбор "0" для отмены. 



